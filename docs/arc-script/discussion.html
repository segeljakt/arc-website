<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Discussion - Arc</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Arc documentation.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../style.css">
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../algorithms/algorithms.html">Algorithms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../algorithms/signal-smoothing.html">Signal Smoothing</a></li><li class="chapter-item expanded "><a href="../algorithms/peak-detection.html">Peak Detection</a></li><li class="chapter-item expanded "><a href="../algorithms/reservoir-sampling.html">Reservoir Sampling</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/doc.html">Arc-Script - Version 0.0.1</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/problem-motivation.html">Problem and Motivation</a></li><li class="chapter-item expanded "><a href="../arc-script/getting-started.html">Getting Started</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref.html">Language Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/BNF.html">BNF</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/concepts.html">Base Language Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/names.html">Names</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/paths.html">Paths</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/modules.html">Modules</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/values.html">Values</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/literals.html">Literals</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/types.html">Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/scalars.html">Scalars</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/exprs.html">Expressions</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/patterns.html">Patterns</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/items.html">Items</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/globals.html">Globals</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/funs.html">Functions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/exceptions.html">Exception handling</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/type-aliases.html">Type Aliases</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/extern-funs.html">Extern Functions</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/extern-types.html">Extern Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/uses.html">Imports</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/enums.html">Enums</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/base/nominal-types.html">Nominal Types</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/keywords.html">Keywords</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/concepts.html">Dataflow Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/async-values.html">Asynchronous Values</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/streams.html">Streams</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/events.html">Events</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/futures.html">Futures</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/datetimes.html">Datetimes</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/durations.html">Durations</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/tasks.html">Tasks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/state.html">State</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/cells.html">Cells</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/sets.html">Sets</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/dictionaries.html">Dictionaries</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/appenders.html">Appenders</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/ports.html">Ports</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/timers.html">Timers</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/timeouts.html">Timeouts</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/termination.html">Termination</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/keys.html">Keys</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/pipelines.html">Pipelines</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/dataflow/piping-operator.html">Piping Operator</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/collections/concepts.html">Collection Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../arc-script/lang-ref/collections/streamable.html">Streamable Sources</a></li><li class="chapter-item expanded "><a href="../arc-script/lang-ref/collections/streamable.html">Collectable Sinks</a></li></ol></li><li class="chapter-item expanded "><a href="../arc-script/discussion.html" class="active">Discussion</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../arc-mlir/lang-ref.html">Arc-MLIR</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Arc</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#discussion" id="discussion">Discussion</a></h1>
<p>This section contains some extra discussion behind the problem and motivation of Arc-Script.</p>
<h2><a class="header" href="#why-arc-script" id="why-arc-script">Why Arc-Script?</a></h2>
<p>Arc-Script is a high-level language for data analytics which under-the-hood translates into <a href="https://github.com/cda-group/arcon">Arcon</a>. Arcon is a distributed system for stream processing and data warehousing which is implemented in Rust. Similar to other streaming systems (e.g., <a href="https://flink.apache.org/">Flink</a> and <a href="https://github.com/TimelyDataflow/timely-dataflow">Timely</a>) Arcon provides a <em>framework</em> in Rust - a general purpose programming language. Since anything which is a value in Rust can be hidden behind a function abstraction, a valid argument against Arc-Script is <em>&quot;Why not just use Arcon and Rust&quot;</em>?. Rust particularly has the following benefits:</p>
<ul>
<li>Rust is <em>flexible</em> by being able to express general computations.</li>
<li>Rust is <em>fast</em> by compiling into efficient machine code.</li>
<li>Rust is <em>safe</em> by preventing memory-management errors.</li>
</ul>
<h2><a class="header" href="#core-problems" id="core-problems">Core Problems</a></h2>
<p>A core problem is that Rust was not designed for the specific problem of data analytics. Rust exposes constructs which a language for data analytics does not benefit from and should ideally not have. Notably, Rust has references, lifetimes, affine types, and low-level memory management. While these features give programmers control over <em>how</em> to solve problems (which may lead to more efficient solutions), they have less impact on <em>what</em> problems can be solved. Data analysts may therefore get stuck on trying to optimise solutions instead of solving problems. Optimisation should ideally be the job of a compiler and not a human. Since these features are at the core of Rust, any abstractions built on top of them within Rust are inevitably going to be leaking their complexity as well. In other words, Rust cannot hide the fact that it has references, affine types, and other details. This phenomena is by-design since Rust programs should be efficient even at high levels of abstraction.</p>
<p>The second problem is that Arcon is a framework written and exposed in Rust and cannot therefore solve the previous problem. The only solution to completely decouple program specification from execution is to develop a language which compiles into Rust. Note that these problems are not just exclusive to Arcon, but apply more generally to all DSLs which are exposed as frameworks. The reason why frameworks such as Flink have been successful is that they are embedded in languages whose features more closely resemble what is expected of a language for data analytics. Notably, Scala has briefer syntax and by-value semantics. Furthermore, embedding DSLs as frameworks only makes sense if the framework is written in the same language as the system's runtime. It is for example difficult to expose the entirety of Arcon's framework in Python in a natural way since many of its components (e.g., operator implementations) cannot simply be passed around as values in Rust. Arcon can however be exposed as a library in Python at the cost of flexibility by exposing hard-coded versions of Arcon operators (e.g., map, filter). Moreover, exposing Rust in languages with virtual-machines such as Scala would not work since Scala UDFs cannot execute in Rust. Python UDFs are more feasible as they do not need to execute in a new process.</p>
<p>Arc-Script's goal is to be high-level, but not too high-level. Very high-level languages such as SQL come at a loss of generality by heavily constraining what problems can be solved. Instead, Arc-Script aims to be relatively high-level and offer support for abstraction. Unlike Rust, these abstractions should not leak complexity, but may come at the cost of performance. Performance is an issue addressed by Arc-Script's MLIR middle-end optimiser and not the developer.</p>
<h2><a class="header" href="#problems" id="problems">Problems</a></h2>
<p>This section pinpoints additional problems and their consequences.</p>
<ul>
<li><strong>P1</strong>:
<ul>
<li><strong>Problem</strong>: Arcon does not have data analytics-specific <em>formalism</em>.</li>
<li><strong>Consequence</strong>: Hard to define what an Arcon program exactly is.</li>
</ul>
</li>
<li><strong>P2</strong>:
<ul>
<li><strong>Problem</strong>: Arcon does not have data analytics-specific <em>syntax</em>.</li>
<li><strong>Consequence</strong>: Programs are more difficult to express than they should be (boilerplate code, unfamiliarity).</li>
</ul>
</li>
<li><strong>P3</strong>:
<ul>
<li><strong>Problem</strong>: Arcon executes programs exactly as they are written without high-level optimisations.</li>
<li><strong>Consequence</strong>: Programmers need to think about how they write their programs to achieve good performance.</li>
</ul>
</li>
<li><strong>P4</strong>:
<ul>
<li><strong>Problem</strong>: Arcon has no information about the code which it is executing</li>
<li><strong>Consequence</strong>: Cannot support runtime optimisation like operator fusion</li>
</ul>
</li>
<li><strong>P5</strong>:
<ul>
<li><strong>Problem</strong>: Arcon does not support a type system at the data analytics level</li>
<li><strong>Consequence</strong>: Hard to statically verify certain properties while providing helpful error messages</li>
</ul>
</li>
<li><strong>P6</strong>:
<ul>
<li><strong>Problem</strong>: Rust's type system is restrictive.</li>
<li><strong>Consequence</strong>: Arcon has no option but to not support generalisations that would be helpful at the data analytics-level (e.g., operator arity).</li>
</ul>
</li>
<li><strong>P7</strong>:
<ul>
<li><strong>Problem</strong>: Arcon combines driver- and worker-code, and compiles code eagerly and only once, for all machines at startup.</li>
<li><strong>Consequences</strong>: Driver and workers must have homogeneous hardware </li>
</ul>
</li>
<li><strong>P7</strong>:
<ul>
<li><strong>Problem</strong>: Arcon's Rust-based framework is tightly coupled with its runtime</li>
<li><strong>Consequence</strong>: Programs written in Arcon cannot run on other runtimes (e.g., Timely, Flink) </li>
</ul>
</li>
</ul>
<h1><a class="header" href="#aim" id="aim">Aim</a></h1>
<p>Arc-Script's level of abstraction is lower than query-languages but higher than systems languages. Programs contain sequential (non-declarative) code, have pass-by-value semantics, and compile into and intermix with systems languages and streaming runtimes. Arc-Script's generality level is broader than query-languages but narrower than general-purpose languages. Like query-languages, Arc-Script programs are about programming with high-level operators and collections, but unlike query-languages, these concepts can also be naturally expressed inside Arc-Script programs. The idea is to give more flexibility and allow programs to be optimised at a finer level of granularity, while removing potential complexity introduced by systems languages. Since there are benefits to lifting the level of abstraction even further, the goal is also to build a higher level language which compiles into Arc-Script.</p>
<h2><a class="header" href="#outline" id="outline">Outline</a></h2>
<p>In response to the previously mentioned problems, the question is, can we get <em>&quot;the best of both worlds?&quot;</em> of Rust's and Arc-Script's benefits. In other words, can we achieve both efficiency and simplicity?</p>
<p><sup class="footnote-reference"><a href="#1">1</a></sup> In contrast to libraries, frameworks rely on the concept of <a href="https://en.wikipedia.org/wiki/Inversion_of_control"><em>inversion of control</em></a> which in basic terms mean that users can extend the framework with custom code (e.g., UDFs and operators), but is not in charge of how that code will be executed.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../arc-script/lang-ref/collections/streamable.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../arc-mlir/lang-ref.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../arc-script/lang-ref/collections/streamable.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../arc-mlir/lang-ref.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
